{
    name: 'ff-{{ environment }}-graphql-api',
    organization: 'friendfetcher-{{ environment }}',
    kms: {
        project: 'friendfetcher-shared',
        keyRing: '{{ environment }}',
        key: 'graphql-api',
        location: 'us-central1',
        version: 1,
    },
    ssm: {
        project: 'friendfetcher-shared',
    },
    database: {
        postgres: true,
    },
    metrics: {
        port: 3000,
        endpoint: '/metrics',
    },
    services: [
        {
            internal_port: 3000,
            processes: ['app'],
            concurrency: {
                hard_limit: 25,
                soft_limit: 20,
                type: 'connections',
            },
            ports: [
                {
                    handlers: ['http'],
                    port: 80,
                },
                {
                    handlers: ['tls', 'http'],
                    port: 443,
                },
            ],
            health_checks: [
                {
                    interval: 10000,
                    grace_period: '5s',
                    method: 'get',
                    path: '/api/health',
                    protocol: 'http',
                    timeout: 2000,
                },
            ],
        },
    ],
    env: {
        common: {
            APOLLO_GRAPH_REF: 'graphq-api-{{ environment }}@current',
            APOLLO_SCHEMA_REPORTING: '{{ environment != "lcl" }}',
            NODE_ENV: '{{ environment }}',
            PORT: 3000,
            // APOLLO_KEY: {
            //   fromKms: {
            //     value: '',
            //   },
            // },
            GOOGLE_CREDENTIALS: {
                fromSsm: {
                    name: '{{ environment }}-graphql-api-google-credentials',
                    version: 1,
                },
            },
            NEW_RELIC_APP_NAME: 'ff-{{ environment }}-graphql-api',
        },
        dev: {
            APOLLO_SCHEMA_REPORTING: true,
            APOLLO_KEY: {
                fromKms: {
                    value: 'CiQAFjmuDnTBnQmubUbDv94GcAR4zJCajt3L+bhJ+FFyfkmX1MYSVgCc/ecidRYIJSGmooD/jTW5z66v2gGn3BoFbvsQVb0kq6gulJmpweQuw2ExkZagk+sM6q4uHg7Fo8F4558fOUrbzenLZhEL0eEfZtbjTlf1Q7tDt5SJ',
                },
            },
            FIREBASE_API_KEY: {
                fromKms: {
                    value: 'CiQAFjmuDiGlFk0mWbN+tw1+xehJEAhzEcnf1vO8yMsPJ1QFooISUACc/eci+G4Ej/dn0xC6bg+GRdjb6rOBYdyTtYzvYqzoFjoCNS22Fyx4UhstpRxuZ1nhGZXgE2+/OvZtZQuLd54Bpqg7eH7xXwTkVqE2DdjM',
                },
            },
            NEW_RELIC_LICENSE_KEY: {
                fromKms: {
                    value: 'CiQAFjmuDun7pXykCX9ogtUplftgAivOu3EhwTRLDMXc26fuplkSUgCc/eciuPky+KqlsbAb8tpDPS1Wa3n/chd6n+FyxYe7h9OOHU61RisqS9b2B5FK71TIWZnr5ztQnV6rZ257RpaQ/ps+Le5X+PqRUqbVW3UCxYc=',
                },
            },
        },
    },
}
